# アプリ/MCPサーバー仕様

このMCPサーバーを利用すると、VSCodeの、Agent Modeのcopilotチャット欄から

- 我々のC++コーディングルールで、コードをレビューしてください。
- 我々のC#コーディングルールで、コードをレビューしてください。

と依頼すると、そのルールでレビューをしてくれるようにする。

また、毎回そのような指示を入力するのが面倒なため、チャット欄に`/`を入力すると、標準的なレビュー依頼の指示文面(プロンプト)を選択できる。

ためのMCPサーバー。

# ソリューション内のプロジェクト説明

| プロジェクト名                          | 概要                                                      | exeの配置先                  |
| :-------------------------------------- | :-------------------------------------------------------- | ---------------------------- |
| ReviewWithOurCodingRulesMcpServer(.exe) | MCPサーバー本体。<br>ツールとプロンプトが記述されている。 | `C:\Program Files\McpJikken` |

# ビルド～MCPサーバーを登録するまで

* `1.CopyToProgramFiles.bat`をダブルクリックして実行する

プロジェクトがビルドされ、成果物が所定の位置に配置（コピー）される。  
（所定の位置とは、上の「exeの配置先」を参照）

* 配置されたMCPサーバーをVSCodeに登録する

「ツール」ボタンを押す。

![](./images/2025-07-16-23-20-08.png)

VSCode上部で「チャットで使用できるツールを選択してください」が開くので、リストの一番下の「その他のツールを追加」を押す。

![](./images/2025-07-16-23-20-52.png)

「MCPサーバーの追加」を押す。

![](./images/2025-07-16-23-21-46.png)

「stdio」を選択する。

![](./images/2025-07-16-23-23-48.png)

`C:\Program Files\McpJikken\ReviewWithOurCodingRulesMcpServer.exe`  
と入力する。（MCPサーバーの起動時のコマンドを登録）  
※必ず「"」で前後をくくること。

![](./images/2025-07-20-23-41-04.png)

サーバーID（サーバーの名前）を入力する。（今回は下のようにした）

![](./images/2025-07-20-23-42-54.png)

グローバルにする。（どちらでもいいが、一旦）

![](./images/2025-07-16-23-26-59.png)

こういう感じで、`C:\Users\<ユーザー名>\AppData\Roaming\Code\User\mcp.json`に登録される。

![](./images/2025-07-20-23-44-04.png)

※今回のように、「Program Files」というスペースの入るようなコマンドにする場合は、最初と最後を「"」で囲まないと、下のように変になる。（「Program」で途切れて、のこりが「args」扱いになっちゃう）

![](./images/2025-07-16-23-32-47.png)

![](./images/2025-07-16-23-33-03.png)

![](./images/2025-07-20-23-44-49.png)

もし起動できてなかったら、設定ファイルを開くと、そのMCPサーバーの項目の上に「起動」ボタンが出てるので、それを押すと起動する。

![](./images/2025-07-20-23-50-11.png)

これで、MCPサーバーが使える状態になった。

この状態で、VSCodeのチャット欄を「Agent Mode」にして、「/」を入力する。

そうすると、下図のように、今回追加したプロンプトが表示されるのでそれを選択する。

![](2025-07-20-23-46-49.png)

そうすると、プロンプトの内容がチャット欄に出てくるので、そのままエンターを押すと、レビュー指示が飛び、Copilotが我々のコーディングルールでレビューをしてくれる。

動かし方は以上。




